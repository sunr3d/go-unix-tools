# go-unix-tools

Коллекция классических Unix-команд, реализованных на Go: `find`, `wc`, `xargs`, `logrotate`.

## Описание

Этот проект реализует популярные утилиты Unix на языке Go. Каждая команда находится в отдельной директории и может быть собрана и запущена отдельно. Для повышения производительности в командах `wc` и `logrotate` используется собственная реализация workerpool для конкурентной обработки задач.

## Реализованные команды и параметры

### myFind
Поиск файлов по критериям.
- `-f` — показывать только файлы
- `-d` — показывать только директории
- `-sl` — показывать только символические ссылки
- `-ext <расширение>` — фильтр по расширению (требует -f)
- `<путь>` — обязательный аргумент: директория для поиска

Пример:
```sh
./bin/myFind -f -ext txt ./data
```

### myWc
Подсчет строк, слов или символов в файлах. Использует workerpool для конкурентной обработки нескольких файлов.
- `-l` — подсчет строк
- `-w` — подсчет слов
- `-m` — подсчет символов
- `<файлы>` — один или несколько файлов (обязательны)
- Можно указывать только один из флагов одновременно (или ни одного — тогда по умолчанию считается только количество слов).

Пример:
```sh
./bin/myWc -l data/file1.txt data/file2.txt
```

### myXargs
Выполнение команды для каждой строки из stdin.
- `<команда> <аргументы>` — команда и её аргументы, которые будут выполняться для каждой строки из stdin.

Пример:
```sh
cat files.txt | ./bin/myXargs echo processed:
```

### myRotate
Ротация и архивирование логов. Использует workerpool для конкурентной обработки файлов.
- `-a <директория>` — директория для архивирования (по умолчанию текущая)
- `<файлы>` — список файлов для ротации (только .log)

Пример:
```sh
./bin/myRotate -a ./archive data/file1.log data/file2.log
```

## Сборка

```sh
make
```
Или отдельно для каждой команды:
```sh
make myFind
make myWc
make myXargs
make myRotate
```

## Примеры использования

### myFind
Найти все файлы с расширением .txt в директории data:
```sh
./bin/myFind -f -ext txt ./data
```
Найти только директории:
```sh
./bin/myFind -d ./data
```
Показать только символические ссылки:
```sh
./bin/myFind -sl ./data
```

### myWc
Посчитать количество строк в нескольких файлах:
```sh
./bin/myWc -l data/file1.txt data/file2.txt
```
Посчитать количество слов (по умолчанию):
```sh
./bin/myWc data/file1.txt
```
Посчитать количество символов:
```sh
./bin/myWc -m data/file1.txt
```

### myXargs
Выполнить echo для каждой строки из файла:
```sh
cat files.txt | ./bin/myXargs echo processed:
```
Передать аргументы в команду touch:
```sh
ls *.txt | ./bin/myXargs touch
```

### myRotate
Архивировать несколько логов в указанную директорию:
```sh
./bin/myRotate -a ./archive data/file1.log data/file2.log
```
Архивировать все логи из текущей директории:
```sh
./bin/myRotate *.log
```

## Структура проекта

- `cmd/` — точка входа для каждой команды
- `internal/logic/` — бизнес-логика команд
- `pkg/workerpool/` — пакет с реализацией пула воркеров для конкурентной обработки задач
- `data/` — тестовые файлы
